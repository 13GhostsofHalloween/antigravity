<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particle Effects Collection - BeccoCRO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #ffffff;
            overflow: hidden;
            color: #1a1a2e;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
        }

        #particle-container {
            position: fixed;
            inset: 0;
            z-index: 1;
        }

        .ui-panel {
            position: fixed;
            top: 16px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 16px;
            border-radius: 50px;
            backdrop-filter: blur(20px);
            border: 2px solid #667eea;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.15);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            max-width: 95vw;
            justify-content: center;
        }

        .ui-panel button {
            padding: 8px 16px;
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 50px;
            color: #495057;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .ui-panel button:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .ui-panel button.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
            color: white;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
        }

        .caption {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(16px);
            border-radius: 50px;
            border: 2px solid #667eea;
            z-index: 10;
            font-size: 13px;
            color: #495057;
            max-width: 90vw;
            text-align: center;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.15);
        }

        @media (max-width: 640px) {
            .ui-panel {
                border-radius: 20px;
            }

            .caption {
                border-radius: 20px;
            }
        }
    </style>
</head>

<body>
    <div id="particle-container"></div>

    <div class="ui-panel">
        <button class="active" id="btn-random">Random</button>
        <button id="btn-noise">Noise Spread</button>
        <button id="btn-logo">Logo Morph</button>
        <button id="btn-sphere">Sphere</button>
        <button id="btn-torus">Torus</button>
        <button id="btn-spiral">Spiral Helix</button>
        <button id="btn-dna">DNA Helix</button>
        <button id="btn-grid">Grid Lattice</button>
    </div>

    <div class="caption" id="caption">
        Random Particle Cloud – 가장 기본적인 입자 분포
    </div>

    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script>
        const container = document.getElementById('particle-container');
        const captionEl = document.getElementById('caption');

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xffffff);

        let width = window.innerWidth;
        let height = window.innerHeight;

        const camera = new THREE.PerspectiveCamera(60, width / height, 0.1, 2000);
        camera.position.set(0, 0, 300);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(width, height);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        const particleCount = 15000;

        const basePositions = new Float32Array(particleCount * 3);
        const renderPositions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(renderPositions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        for (let i = 0; i < particleCount; i++) {
            const i3 = i * 3;
            const t = i / particleCount;
            const col = new THREE.Color().setHSL(0.6 + 0.15 * t, 0.8, 0.4);
            colors[i3] = col.r;
            colors[i3 + 1] = col.g;
            colors[i3 + 2] = col.b;
        }

        const material = new THREE.PointsMaterial({
            size: 1.5,
            vertexColors: true,
            transparent: true,
            opacity: 0.9,
            depthWrite: false,
            blending: THREE.NormalBlending
        });

        const points = new THREE.Points(geometry, material);
        scene.add(points);

        const SHAPES = {
            RANDOM: 0,
            NOISE: 1,
            LOGO: 2,
            SPHERE: 3,
            TORUS: 4,
            SPIRAL: 5,
            DNA: 6,
            GRID: 7
        };

        const shapeTargets = new Array(8);
        let currentShape = SHAPES.RANDOM;
        let currentTarget;

        function buildRandom() {
            const arr = new Float32Array(particleCount * 3);
            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                arr[i3] = (Math.random() - 0.5) * 300;
                arr[i3 + 1] = (Math.random() - 0.5) * 300;
                arr[i3 + 2] = (Math.random() - 0.5) * 300;
            }
            return arr;
        }

        function buildNoiseSpread() {
            const arr = new Float32Array(particleCount * 3);
            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                const r = Math.pow(Math.random(), 0.4) * 150;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                arr[i3] = r * Math.sin(phi) * Math.cos(theta);
                arr[i3 + 1] = r * Math.sin(phi) * Math.sin(theta);
                arr[i3 + 2] = r * Math.cos(phi);
            }
            return arr;
        }

        function buildSphere() {
            const arr = new Float32Array(particleCount * 3);
            const radius = 120;
            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                arr[i3] = radius * Math.sin(phi) * Math.cos(theta);
                arr[i3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
                arr[i3 + 2] = radius * Math.cos(phi);
            }
            return arr;
        }

        function buildTorus() {
            const arr = new Float32Array(particleCount * 3);
            const R = 90;
            const r = 30;
            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                const u = Math.random() * Math.PI * 2;
                const v = Math.random() * Math.PI * 2;
                arr[i3] = (R + r * Math.cos(v)) * Math.cos(u);
                arr[i3 + 1] = (R + r * Math.cos(v)) * Math.sin(u);
                arr[i3 + 2] = r * Math.sin(v);
            }
            return arr;
        }

        function buildSpiral() {
            const arr = new Float32Array(particleCount * 3);
            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                const t = (i / particleCount) * Math.PI * 14;
                const radius = 5 + t * 2.8;
                arr[i3] = radius * Math.cos(t);
                arr[i3 + 1] = (i / particleCount - 0.5) * 260;
                arr[i3 + 2] = radius * Math.sin(t);
            }
            return arr;
        }

        function buildDNA() {
            const arr = new Float32Array(particleCount * 3);
            const helixTurns = 12;
            const height = 260;
            const radius = 32;

            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                const t = (i / particleCount) * Math.PI * helixTurns;
                const strand = (i % 2 === 0) ? 0 : Math.PI;
                arr[i3] = radius * Math.cos(t + strand);
                arr[i3 + 1] = (i / particleCount - 0.5) * height;
                arr[i3 + 2] = radius * Math.sin(t + strand);
            }
            return arr;
        }

        function buildGrid() {
            const arr = new Float32Array(particleCount * 3);
            const gridSize = Math.ceil(Math.sqrt(particleCount));
            const spacing = 8;
            let idx = 0;
            for (let z = 0; z < gridSize && idx < particleCount; z++) {
                for (let x = 0; x < gridSize && idx < particleCount; x++) {
                    const i3 = idx * 3;
                    arr[i3] = (x - gridSize / 2) * spacing;
                    arr[i3 + 1] = 0;
                    arr[i3 + 2] = (z - gridSize / 2) * spacing;
                    idx++;
                }
            }
            return arr;
        }

        function buildLogo(callback) {
            const canvas = document.createElement('canvas');
            canvas.width = 600;
            canvas.height = 180;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000';
            ctx.font = 'bold 100px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('BeccoCRO', canvas.width / 2, canvas.height / 2);

            const img = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
            const pts = [];
            for (let y = 0; y < canvas.height; y += 3) {
                for (let x = 0; x < canvas.width; x += 3) {
                    const idx = (y * canvas.width + x) * 4;
                    if (img[idx + 3] > 128) {
                        pts.push({ x: x - canvas.width / 2, y: y - canvas.height / 2 });
                    }
                }
            }

            const arr = new Float32Array(particleCount * 3);
            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                const p = pts[i % pts.length];
                arr[i3] = p.x * 0.7;
                arr[i3 + 1] = -p.y * 0.7;
                arr[i3 + 2] = (Math.random() - 0.5) * 20;
            }
            callback(arr);
        }

        shapeTargets[SHAPES.RANDOM] = buildRandom();
        shapeTargets[SHAPES.NOISE] = buildNoiseSpread();
        shapeTargets[SHAPES.SPHERE] = buildSphere();
        shapeTargets[SHAPES.TORUS] = buildTorus();
        shapeTargets[SHAPES.SPIRAL] = buildSpiral();
        shapeTargets[SHAPES.DNA] = buildDNA();
        shapeTargets[SHAPES.GRID] = buildGrid();

        buildLogo((arr) => {
            shapeTargets[SHAPES.LOGO] = arr;
        });

        basePositions.set(shapeTargets[SHAPES.RANDOM]);
        renderPositions.set(shapeTargets[SHAPES.RANDOM]);
        currentTarget = shapeTargets[SHAPES.RANDOM];
        geometry.attributes.position.needsUpdate = true;

        function setShape(shape) {
            currentShape = shape;
            currentTarget = shapeTargets[shape];

            const captions = {
                [SHAPES.RANDOM]: 'Random Particle Cloud – 가장 기본적인 입자 분포',
                [SHAPES.NOISE]: 'Noise Spread – 노이즈 기반 확산 분포',
                [SHAPES.LOGO]: 'Logo Morph – BeccoCRO 로고 파티클 형성',
                [SHAPES.SPHERE]: 'Spherical Field – 구형 입자 배치',
                [SHAPES.TORUS]: 'Torus Particles – 도넛형 토러스 구조',
                [SHAPES.SPIRAL]: 'Spiral Helix – 나선형 파티클',
                [SHAPES.DNA]: 'Double Helix – DNA 이중나선 구조',
                [SHAPES.GRID]: 'Grid Lattice – 격자 데이터 구조'
            };

            captionEl.textContent = captions[shape];

            document.querySelectorAll('.ui-panel button').forEach(b => b.classList.remove('active'));
            const idMap = {
                [SHAPES.RANDOM]: 'btn-random',
                [SHAPES.NOISE]: 'btn-noise',
                [SHAPES.LOGO]: 'btn-logo',
                [SHAPES.SPHERE]: 'btn-sphere',
                [SHAPES.TORUS]: 'btn-torus',
                [SHAPES.SPIRAL]: 'btn-spiral',
                [SHAPES.DNA]: 'btn-dna',
                [SHAPES.GRID]: 'btn-grid'
            };
            document.getElementById(idMap[shape]).classList.add('active');
        }

        document.getElementById('btn-random').onclick = () => setShape(SHAPES.RANDOM);
        document.getElementById('btn-noise').onclick = () => setShape(SHAPES.NOISE);
        document.getElementById('btn-logo').onclick = () => setShape(SHAPES.LOGO);
        document.getElementById('btn-sphere').onclick = () => setShape(SHAPES.SPHERE);
        document.getElementById('btn-torus').onclick = () => setShape(SHAPES.TORUS);
        document.getElementById('btn-spiral').onclick = () => setShape(SHAPES.SPIRAL);
        document.getElementById('btn-dna').onclick = () => setShape(SHAPES.DNA);
        document.getElementById('btn-grid').onclick = () => setShape(SHAPES.GRID);

        window.addEventListener('resize', () => {
            width = window.innerWidth;
            height = window.innerHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        });

        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);

            const speed = 0.08;
            for (let i = 0; i < basePositions.length; i++) {
                basePositions[i] += (currentTarget[i] - basePositions[i]) * speed;
                renderPositions[i] = basePositions[i];
            }

            geometry.attributes.position.needsUpdate = true;
            points.rotation.y += 0.0016;
            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>

</html>